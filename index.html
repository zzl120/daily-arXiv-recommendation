<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Daily arXiv AI Enhanced - 每日 arXiv 论文 AI 摘要">
    <title>Daily arXiv AI Enhanced</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Flatpickr -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

    <!-- Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="assets/logo2-removebg-preview.png">

    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/styles.css">

    <!-- Authentication Scripts -->
    <script src="js/auth-config.js"></script>
    <script src="js/auth.js"></script>

    <!-- Data Source Configuration -->
    <script src="js/data-config.js"></script>

    <script>
        // Check authentication on page load
        Auth.requireAuth();

        // Show logout button only if password protection is enabled
        document.addEventListener('DOMContentLoaded', function() {
            const logoutButton = document.getElementById('logoutButton');
            if (logoutButton && Auth.isPasswordEnabled()) {
                logoutButton.style.display = '';
            }
        });
    </script>
</head>
<body>
    <!-- 顶部导航栏 -->
    <nav class="top-navbar">
        <div class="container-fluid">
            <div class="navbar-content">
                <div class="navbar-brand">
                    <a href="index.html" class="brand-link">
                        <img src="assets/logo2-removebg-preview.png" alt="Logo" class="navbar-logo" onerror="this.style.display='none'">
                        <div class="brand-text">
                            <h1>Daily arXiv AI Enhanced</h1>
                            <p>每日 arXiv 论文 AI 摘要</p>
                        </div>
                    </a>
                </div>
                <div class="navbar-actions">
                    <a href="https://github.com/dw-dengwei/daily-arXiv-ai-enhanced" target="_blank" class="btn-icon" title="GitHub">
                        <i class="fab fa-github"></i>
                    </a>
                    <a href="settings.html" class="btn-icon" title="Settings">
                        <i class="fas fa-cog"></i>
                    </a>
                    <button class="btn-icon" id="theme-toggle" title="切换主题">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button id="logoutButton" onclick="Auth.logout()" class="btn-icon" title="Logout" style="display: none; color: #e74c3c;">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- 主容器 -->
    <div class="main-wrapper">
        <!-- 侧边栏 -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h3>导航</h3>
                <button class="btn-icon sidebar-toggle" id="sidebar-toggle-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="#overview" class="nav-item active" data-section="overview">
                    <i class="fas fa-home"></i>
                    <span>概览</span>
                </a>
                <a href="#papers" class="nav-item" data-section="papers">
                    <i class="fas fa-file-alt"></i>
                    <span>论文列表</span>
                </a>
                <a href="#statistics" class="nav-item" data-section="statistics">
                    <i class="fas fa-chart-bar"></i>
                    <span>统计数据</span>
                </a>
            </nav>

            <!-- 日期选择器 -->
            <div class="calendar-widget">
                <div class="calendar-header">
                    <button class="btn-icon" id="prev-month">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h4 id="current-month">2025年1月</h4>
                    <button class="btn-icon" id="next-month">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                <div class="calendar-body" id="calendar-body">
                    <!-- Calendar will be generated by JS -->
                </div>
                <div class="date-input-wrapper">
                    <input type="text" id="datepicker" placeholder="选择日期" class="form-control">
                </div>
            </div>

            <!-- 类别筛选 -->
            <div class="category-filter">
                <h4>研究类别</h4>
                <div class="category-list" id="category-list">
                    <div class="loading-small">
                        <div class="spinner-small"></div>
                    </div>
                </div>
            </div>

            <!-- 关键词/作者过滤 -->
            <div class="filter-section">
                <h4>关键词过滤</h4>
                <div class="filter-tags" id="filterTags">
                    <!-- Dynamic filter tags -->
                </div>
            </div>
        </aside>

        <!-- 主内容区 -->
        <main class="main-content">
            <!-- 移动端菜单按钮 -->
            <button class="mobile-menu-btn" id="mobile-menu-btn">
                <i class="fas fa-bars"></i>
            </button>

            <!-- 概览部分 -->
            <section id="overview-section" class="content-section active">
                <!-- 统计卡片 -->
                <div class="stats-grid">
                    <div class="stat-card gradient-purple">
                        <div class="stat-icon">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="total-papers">-</div>
                            <div class="stat-label">今日论文</div>
                        </div>
                    </div>
                    <div class="stat-card gradient-blue">
                        <div class="stat-icon">
                            <i class="fas fa-tags"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="total-categories">-</div>
                            <div class="stat-label">研究类别</div>
                        </div>
                    </div>
                    <div class="stat-card gradient-green">
                        <div class="stat-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="total-analyzed">-</div>
                            <div class="stat-label">已分析</div>
                        </div>
                    </div>
                    <div class="stat-card gradient-orange">
                        <div class="stat-icon">
                            <i class="fas fa-fire"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="update-time">-</div>
                            <div class="stat-label">更新时间</div>
                        </div>
                    </div>
                </div>

                <!-- 论文列表预览 -->
                <div class="content-card">
                    <div class="card-header">
                        <div class="header-left">
                            <i class="fas fa-star"></i>
                            <h2>今日论文</h2>
                        </div>
                        <div class="header-right">
                            <a href="#papers" class="btn-link" data-section="papers">查看全部 <i class="fas fa-arrow-right"></i></a>
                        </div>
                    </div>
                    <div class="card-body">
                        <div id="featured-papers">
                            <div class="loading">
                                <div class="spinner"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 论文列表部分 -->
            <section id="papers-section" class="content-section">
                <div class="section-header">
                    <h1>论文列表</h1>
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="search-input" placeholder="搜索论文标题、作者或关键词...">
                    </div>
                </div>

                <!-- 论文过滤和排序 -->
                <div class="filter-bar">
                    <div class="filter-group">
                        <label>类别:</label>
                        <select id="paper-category-filter" class="filter-select">
                            <option value="">全部类别</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>排序:</label>
                        <select id="paper-sort" class="filter-select">
                            <option value="date">按日期</option>
                            <option value="title">按标题</option>
                        </select>
                    </div>
                </div>

                <!-- 论文列表 -->
                <div id="papers-list" class="papers-list">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>加载论文中...</p>
                    </div>
                </div>

                <!-- 分页 -->
                <nav class="pagination-nav">
                    <ul class="pagination" id="pagination"></ul>
                </nav>
            </section>

            <!-- 统计数据部分 -->
            <section id="statistics-section" class="content-section">
                <div class="section-header">
                    <h1>统计数据</h1>
                    <p class="section-desc">论文数据可视化分析</p>
                </div>

                <div class="content-card">
                    <div class="card-header">
                        <div class="header-left">
                            <i class="fas fa-chart-bar"></i>
                            <h2>类别分布</h2>
                        </div>
                    </div>
                    <div class="card-body">
                        <canvas id="category-chart"></canvas>
                    </div>
                </div>

                <div class="content-card">
                    <div class="card-header">
                        <div class="header-left">
                            <i class="fas fa-chart-line"></i>
                            <h2>论文趋势</h2>
                        </div>
                    </div>
                    <div class="card-body">
                        <canvas id="trend-chart"></canvas>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- 论文详情模态框 -->
    <div class="paper-modal" id="paperModal">
        <div class="paper-modal-content">
            <div class="paper-modal-header">
                <h2 id="modalTitle">Details</h2>
                <button id="closeModal" class="btn-icon">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="paper-modal-body" id="modalBody">
            </div>
            <div class="paper-modal-footer">
                <div class="paper-navigation">
                    <span class="navigation-hint">← → to navigate • space for random</span>
                    <span id="paperPosition" class="paper-position">-</span>
                </div>
                <div class="paper-modal-buttons">
                    <a id="kimiChatLink" href="#" target="_blank" class="btn-paper btn-primary" title="Open in KimiChat">
                        <i class="fas fa-robot"></i> Kimi
                    </a>
                    <a id="pdfLink" href="#" target="_blank" class="btn-paper btn-secondary" title="Open PDF">
                        <i class="fas fa-file-pdf"></i> PDF
                    </a>
                    <a id="htmlLink" href="#" target="_blank" class="btn-paper btn-secondary" title="Open HTML">
                        <i class="fas fa-code"></i> HTML
                    </a>
                    <a id="githubLink" href="#" target="_blank" class="btn-paper btn-secondary" title="Open GitHub" style="display: none;">
                        <i class="fab fa-github"></i> Code
                    </a>
                    <a id="paperLink" href="#" target="_blank" class="btn-paper btn-primary" title="Open in arXiv">
                        <i class="fas fa-external-link-alt"></i> arXiv
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- 回到顶部按钮 -->
    <button class="back-to-top" id="back-to-top">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>© 2025 daily-arXiv-ai-enhanced | 内容由AI生成，请仔细甄别 | <a href="https://github.com/dw-dengwei/daily-arXiv-ai-enhanced" target="_blank">GitHub</a></p>
        </div>
    </footer>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>

    <!-- Flatpickr -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <!-- Custom JS -->
    <script src="js/app.js"></script>
</body>
</html>
